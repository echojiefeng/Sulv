!function(e){function t(a){if(n[a])return n[a].exports;var i=n[a]={"exports":{},"id":a,"loaded":!1};return e[a].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var n={};t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){e.exports=n(1)},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{"constructor":{"value":e,"enumerable":!1,"writable":!0,"configurable":!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),c=a(n(2)),l=a(n(3)),u=function(e,t){var n=!0,a=!1,i=void 0;try{for(var o,r=Reflect.ownKeys(t)[Symbol.iterator]();!(n=(o=r.next()).done);n=!0){var s=o.value;if("constructor"!==s&&"prototype"!==s&&"name"!==s){var c=Object.getOwnPropertyDescriptor(t,s);Object.defineProperty(e,s,c)}}}catch(e){a=!0,i=e}finally{try{!n&&r.return&&r.return()}finally{if(a)throw i}}};new(function(e){function t(){r(this,t);var e=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));e.name="city";var n=e;return e.isLoading=!1,e.searchType=0,e.letterDtPositions=[],e.rightNavPositions=[],e.initDate(),e.initEvent(),e.getCityData(e.cityJsonUrl).then(function(t){$.each(t,function(e,t){$.each(t["city"],function(e,t){var n=makePy(t["name"])[0].substring(0,1),a=$("<li>"+t["name"].replace("市","")+"</li>");$(".Ctab_hotplace").next().children("dt:contains("+n+")").next().children("ul").append(a)})}),$(document.body).scrollTop(0),n.setIndexNavPosition($(".city-list-domestic").find("dt").children("span"),n.letterDtPositions),n.setIndexNavPosition($(".city-list-nav-domestic").find("li"),n.rightNavPositions),$.each($(".Ctab_hotplace").next().find("li"),function(t,a){$(a).click(function(){var t={"name":$(a).text(),"checkintime":e.GetDateStr(0),"checkouttime":e.GetDateStr(1),"stayday":1,"linkurl":$("#url-heng").attr("Hotel"),"type":0};e.getRpDetail($("#url-heng").attr("save-search-history"),t).then(function(e){console.log(e)}),n.isLocation=!1,n.chooseCity($(a).text())})})}),e}return o(t,e),s(t,[{"key":"initDate","value":function(){Array.prototype.slice.call($(".citytabs").children("li")).forEach(function(e){return $(e).text()==sessionStorage["city"]?$(e).addClass("select"):$(e).removeClass("select")}),this.cityJsonUrl="/addons/wqtgd_jiudian/template/mobile/data/cityJson.json";for(var e=0;e<25;e++){var t=$("<dt>").append("<span>"+String.fromCharCode(65+e)+"</span>");$(".indexwrap").parent().append(t);var n=$("<dd>"),a=$("<ul>");n.append(a),$(".indexwrap").parent().append(n)}$(".searchResult").append('<div class="CresultModule items-city"><ul></ul></div>'),$(".searchResult").append('<div class="CresultModule items-hotel"><ul></ul></div>')}},{"key":"initEvent","value":function(){var e=this,t=this;$(document).scroll(function(){$(document).scrollTop()>869?$(".Cback").removeClass("Ldn"):$(".Cback").addClass("Ldn")}),$(".Cback").click(function(e){e.stopPropagation(),e.preventDefault(),$(document).scrollTop(0)}),$(".near").click(function(t){t.stopPropagation(),t.preventDefault(),"附近酒店"===$(".near").text()&&e.getAddrTX()}),$.each($(".citytabs").children("li"),function(n,a){$(a).click(function(){var n={"name":$(a).text(),"checkintime":e.GetDateStr(0),"checkouttime":e.GetDateStr(1),"stayday":1,"linkurl":$("#url-heng").attr("Hotel"),"type":0};e.getRpDetail($("#url-heng").attr("save-search-history"),n).then(function(e){console.log(e)}),t.isLocation=!1,t.chooseCity($(a).text())})}),$("#usingBack").click(function(e){e.stopPropagation(),e.preventDefault(),window.history.go(-1)}),$(document).keydown(function(e){8==e.keyCode?t.searchType=1:(e.keyCode>=65||e.keyCode<=90)&&(t.searchType=0)}),$(".city-list-nav-domestic").find("a").click(function(e){e.stopPropagation(),e.preventDefault();var n=Number(e.clientY);t.indexLocation(n)}),$(".city-list-nav-domestic").children("ul").on("touchmove",function(e){e.stopPropagation(),e.preventDefault();var n=e.originalEvent.targetTouches[0],a=Number(n.pageY);t.indexLocation(a-$(document.body).scrollTop())});var n=$(".searchResult");$(".Cinput_search").on("input propertychange",function(){var e=$(".Cinput_search").val().length;0==e?(t.isLoading=!1,$(".Cnewheader").removeClass("clickChange"),$(".wrapCity").removeClass("fn-hide"),n.css("margin-top","0px")):e>0&&e<=1?($(".Cnewheader").addClass("clickChange"),$(".wrapCity").addClass("fn-hide"),n.css("margin-top","0px"),n.find("ul").children("li").remove(),t.isLoading||(t.isLoading=!0,t.getSearchData($("#url-heng").attr("newtemplatesou"),$(".Cinput_search").val()).then(function(e){if(null!=e){var a="",i="",o="";$.each(e,function(e,t){"region"==t[1]||"resdz"==t[1]?(a="city",i=t[0],o="typcn typcn-location"):(a="hotel",i=t[1],o="typcn typcn-home");var r=$('<li data-type="'+a+'"><a href="javascript:;"><div class="pure-g"><div class="pure-u-3-24"><i class="'+o+'" style="left:1.6rem;color:#BFBFBF"></i></div><div class="pure-u-21-24"><div class="title">'+i+"</div></div></div></a></li>");n.children(".items-"+a).children("ul").append(r)}),$.each(n.find("li"),function(e,n){$(n).click(function(e){if(e.stopPropagation(),e.preventDefault(),t.isLocation=!1,$(".Cinput_search").val(""),"city"==$(n).attr("data-type")){var a={"name":$(n).find(".title").text(),"checkintime":t.GetDateStr(0),"checkouttime":t.GetDateStr(1),"stayday":1,"linkurl":$("#url-heng").attr("Hotel"),"type":0};t.getRpDetail($("#url-heng").attr("save-search-history"),a).then(function(e){console.log(e)}),t.chooseCity($(n).find(".title").text())}else"hotel"==$(n).attr("data-type")&&t.chooseHotel($(n).find(".title").text())})})}}))):(t.isLoading=!1,t.searchMatch($(".Cinput_search").val().trim(),"fn-hide"))}),$(".cancel>span").click(function(e){e.stopPropagation(),e.preventDefault(),$(".Cinput_search").val(""),$(".Cnewheader").removeClass("clickChange"),$(".wrapCity").removeClass("fn-hide"),n.css("margin-top","0px")}),$(".icon-right").click(function(e){t.isLoading=!1,$(".Cinput_search").val(""),n.find("ul").children("li").remove()})}},{"key":"setIndexNavPosition","value":function(e,t){$.each(e,function(e,n){var a={};a.text=$(n).text().trim(),a.top=$(n).offset().top,a.height=$(n).outerHeight(),t.push(a)})}},{"key":"indexLocation","value":function(e){var t=this;$.each(t.rightNavPositions,function(n,a){e>=a.top&&e<=a.top+a.height&&$.each(t.letterDtPositions,function(e,t){t.text==a.text&&$(document.body).scrollTop(t.top)})})}},{"key":"searchMatch","value":function(e,t){var n=this,a=e.length-1,i=e.substring(a).toLowerCase();new RegExp("[\\u4E00-\\u9FFF]+","g").test(i)?$.each($(".searchResult").find("li"),function(o,r){var s=$(r).find(".title").text().replace(",",""),c=s.substr(a,a).substr(0,1);c!=i&&0==n.searchType?$(r).addClass(t):c==i&&0==n.searchType?$(r).removeClass(t):c==i&&1==n.searchType&&s.substr(0,a+1)==e&&$(r).removeClass(t)}):$.each($(".searchResult").find("li"),function(o,r){var s=$(r).find(".title").text().replace(",","");console.log(s);var c=makePy(s)[0].toLowerCase().substr(a,a).substr(0,1);c!=i&&0==n.searchType?$(r).addClass(t):c==i&&1==n.searchType&&makePy(s)[0].toLowerCase().substr(0,a+1)==e&&$(r).removeClass(t)})}},{"key":"chooseHotel","value":function(e){var t=e,n=$("#url-heng").attr("room-list-url"),a=this.GetDateStr(0),i=this.GetDateStr(1);sessionStorage["stayTime"]=a+","+i,window.location.href=n+t+"&checkin="+a+"&checkout="+i+"&checkday=1"}},{"key":"chooseCity","value":function(e){var t=this;sessionStorage["hotelList"]="",sessionStorage["city"]=e;var n={"cityname":e,"checkin":this.GetDateStr(0),"checkout":this.GetDateStr(1),"hotelNameOrAddress":"","price":"","roomType":"","day":1};sessionStorage["stayTime"]=[n.checkin,n.checkout],sessionStorage["hotelListUrl"]=$("#url-heng").attr("Hotel"),this.getHotelListData(sessionStorage["hotelListUrl"],n).then(function(e){$.each(e,function(e,n){if(t.isLocation){if(""!=n["hotelaccuracy"]){var a=n["hotelaccuracy"].split("-")[0],i=n["hotelaccuracy"].split("-")[1];t.isPointInCircle(a,i)&&(sessionStorage["hotelList"]+=";"+JSON.stringify(n))}}else sessionStorage["hotelList"]+=";"+JSON.stringify(n)}),sessionStorage["hotelList"]=sessionStorage["hotelList"].substr(1),window.location.href=$("#url-heng").attr("Hotellisttwo")})}},{"key":"getAddrTX","value":function(){var e=this,t=new qq.maps.Geocoder({"complete":function(t){var n=t.detail.address,a=n.substr(n.indexOf("省")+1).split("市")[0],i={"name":a,"checkintime":e.GetDateStr(0),"checkouttime":e.GetDateStr(1),"stayday":1,"linkurl":$("#url-heng").attr("Hotel"),"type":0};e.getRpDetail($("#url-heng").attr("save-search-history"),i).then(function(e){console.log(e)}),e.isLocation=!0,e.chooseCity(a)}}),n=new qq.maps.LatLng(sessionStorage["positionL"].split(",")[0],sessionStorage["positionL"].split(",")[1]);t.getAddress(n)}},{"key":"isPointInCircle","value":function(e,t){var n=new BMap.Point(sessionStorage["positionL"].split(",")[1],sessionStorage["positionL"].split(",")[0]),a=new BMap.Point(e,t),i=new BMap.Circle(a,14e3);return BMapLib.GeoUtils.isPointInCircle(n,i)}}]),t}(function(){for(var e=function e(){r(this,e)},t=arguments.length,n=Array(t),a=0;a<t;a++)n[a]=arguments[a];var i=!0,o=!1,s=void 0;try{for(var c,l=n[Symbol.iterator]();!(i=(c=l.next()).done);i=!0){var p=c.value;u(e,p),u(e.prototype,p.prototype)}}catch(e){o=!0,s=e}finally{try{!i&&l.return&&l.return()}finally{if(o)throw s}}return e}(c.default,l.default)))},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{"value":!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),i=function(){function e(){n(this,e)}return a(e,[{"key":"getCityData","value":function(e){var t=this;return new Promise(function(n,a){$.getJSON(e,function(e){n.call(t,e.result)})})}},{"key":"getSearchData","value":function(e,t){var n=this;return new Promise(function(a,i){$.post(e,{"value":t},function(e){a.call(n,e)},"json")})}},{"key":"getHotelListData","value":function(e,t){var n=this;return new Promise(function(a,i){$.post(e,t,function(e){a.call(n,e)},"json")})}},{"key":"getRpDetail","value":function(e,t){return new Promise(function(n,a){$.ajax({"url":e,"type":"post","data":t,"dataType":"json","success":function(e){n.call(self,e)},"error":function(e,t,n){}})})}}]),e}();t.default=i},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{"value":!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),i=function(){function e(){n(this,e)}return a(e,[{"key":"GetDateStr","value":function(e){var t=new Date;t.setDate(t.getDate()+e);var n=t.getFullYear(),a=t.getMonth()+1;a=a<10?"0"+a:a;var i=t.getDate();return i=i<10?"0"+i:i,n+"-"+a+"-"+i}},{"key":"AddZero","value":function(e){var t=e.split("-");return t[0]+"-"+(t[1]<10?"0"+t[1]:t[1])+"-"+(t[2]<10?"0"+t[2]:t[2])}},{"key":"getFomatData","value":function(e){var t=e.split("-");return t[1]+"月"+t[2]+"日"}},{"key":"getHotelType","value":function(e){var t="";switch(e){case"1":t="商务型";break;case"6":t="舒适型";break;case"7":t="豪华型";break;case"3":t="三星级";break;case"4":t="四星级";break;case"5":t="五星级"}return t}},{"key":"GetDateDiff","value":function(e,t){var n=new Date(Date.parse(e.replace(/-/g,"/"))).getTime(),a=new Date(Date.parse(t.replace(/-/g,"/"))).getTime();return Math.abs(n-a)/864e5}},{"key":"myScrollEvent","value":function(e){var t=!1;return t=!(e.scrollTop()>2e3),this.scrollActionY=e.scrollTop(),new Promise(function(e,n){e.call(self,t)})}},{"key":"setScoreStar","value":function(e){var t=0,n=!1,a=e.split(".")[0],i=e.split(".")[1];switch(a){case"0":t=0;break;case"1":t=1;break;case"2":t=2;break;case"3":t=3;break;case"4":t=4;break;case"5":t=5}return n=0!=i,new Promise(function(e,a){e.call(self,{"starNum":t,"half":n})})}}]),e}();t.default=i}]);